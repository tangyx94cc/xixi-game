<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>è¥¿è¥¿é—¯å…³</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&family=Dancing+Script:wght@600&display=swap" rel="stylesheet" />
  <style>
    :root {
      --bg: #FDFBF7;
      --card: #FFFFFF;
      --primary: #F08080;
      --secondary: #87CEEB;
      --text: #4A4A4A;
      --shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: "Nunito", "Quicksand", "Helvetica Rounded", system-ui, -apple-system, sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 24px 16px;
    }

    .wrap {
      width: min(520px, 100%);
      text-align: center;
    }

    .dogs {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 8px;
      margin-bottom: 10px;
    }

    .dogs img {
      width: 100%;
      aspect-ratio: 1 / 1;
      border-radius: 50%;
      border: 3px solid var(--primary);
      object-fit: cover;
      background: #fff;
      transition: filter 0.3s ease;
    }

    .dogs img.wiggle {
      animation: wiggle 0.45s ease-in-out;
    }

    .dogs img.blink {
      animation: blink 0.35s ease-in-out;
    }

    .dogs.annoyed img { filter: grayscale(100%); }

    .bubble {
      min-height: 24px;
      margin: 8px 0 16px;
      font-size: 0.95rem;
      color: var(--primary);
      padding: 6px 10px;
      display: inline-block;
      border-radius: 999px;
      background: rgba(240, 128, 128, 0.12);
      opacity: 0;
      transform: translateY(-6px);
      transition: opacity 0.3s ease, transform 0.3s ease;
    }

    .bubble.show { opacity: 1; transform: translateY(0); }

    .card {
      background: var(--card);
      box-shadow: var(--shadow);
      border-radius: 20px;
      padding: 24px 20px 22px;
      border: 2px solid rgba(240, 128, 128, 0.2);
    }

    .title {
      margin: 0 0 8px;
      font-size: 1.4rem;
      color: var(--primary);
      font-weight: 700;
    }

    .question {
      font-size: 1.1rem;
      margin: 12px 0 16px;
    }

    .input-row {
      display: flex;
      gap: 10px;
      align-items: stretch;
      justify-content: center;
      flex-wrap: wrap;
    }

    input[type="text"] {
      flex: 1 1 220px;
      max-width: 320px;
      padding: 12px 14px;
      border-radius: 12px;
      border: 2px solid rgba(240, 128, 128, 0.4);
      font-size: 1rem;
      outline: none;
      transition: border 0.2s ease, box-shadow 0.2s ease;
    }

    input[type="text"]:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(240, 128, 128, 0.15);
    }

    input[type="text"].error {
      border-color: #e74c3c;
      box-shadow: 0 0 0 3px rgba(231, 76, 60, 0.15);
      animation: shake 0.35s linear;
    }

    button {
      border: none;
      background: var(--primary);
      color: white;
      font-size: 1rem;
      padding: 12px 18px;
      border-radius: 12px;
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    button:hover { transform: translateY(-1px); box-shadow: 0 6px 14px rgba(240, 128, 128, 0.25); }

    .progress {
      margin-top: 14px;
      font-size: 0.9rem;
      color: #9a8f8f;
    }

    .final {
      display: none;
      font-family: "Dancing Script", cursive;
      font-size: clamp(3rem, 8vw, 4.5rem);
      animation: fadeIn 1s ease forwards;
      margin-top: 20px;
      position: relative;
      padding: 18px 16px;
    }

    .final-text {
      color: var(--primary);
      position: relative;
      z-index: 2;
    }

    .final-letter {
      width: min(420px, 92%);
      height: 140px;
      margin: 18px auto 0;
      border-radius: 14px;
      background:
        linear-gradient(180deg, rgba(255, 255, 255, 0.98), rgba(248, 248, 248, 0.98)),
        repeating-linear-gradient(0deg, rgba(0, 0, 0, 0.03) 0 1px, transparent 1px 4px),
        repeating-linear-gradient(90deg, rgba(0, 0, 0, 0.02) 0 1px, transparent 1px 6px);
      box-shadow:
        0 12px 24px rgba(0, 0, 0, 0.08),
        inset 0 1px 0 rgba(255, 255, 255, 0.9),
        inset 0 -1px 0 rgba(0, 0, 0, 0.05);
      border: 1px solid rgba(240, 128, 128, 0.18);
      position: relative;
      z-index: 1;
    }

    .final::before,
    .final::after {
      content: "";
      position: absolute;
      inset: -24px -18px;
      border-radius: 26px;
      pointer-events: none;
    }

    .final::before {
      background:
        radial-gradient(circle at 12% 24%, rgba(240, 128, 128, 0.22) 0 9px, transparent 10px),
        radial-gradient(circle at 88% 18%, rgba(135, 206, 235, 0.22) 0 10px, transparent 11px),
        radial-gradient(circle at 18% 78%, rgba(240, 128, 128, 0.18) 0 8px, transparent 9px),
        radial-gradient(circle at 82% 82%, rgba(135, 206, 235, 0.18) 0 8px, transparent 9px),
        radial-gradient(circle at 50% 10%, rgba(240, 128, 128, 0.12) 0 18px, transparent 19px),
        radial-gradient(circle at 50% 90%, rgba(135, 206, 235, 0.12) 0 18px, transparent 19px),
        repeating-linear-gradient(45deg, rgba(240, 128, 128, 0.08) 0 8px, transparent 8px 18px),
        repeating-linear-gradient(-45deg, rgba(135, 206, 235, 0.06) 0 10px, transparent 10px 22px);
      opacity: 0.9;
    }

    .final::after {
      border: 1.5px solid rgba(240, 128, 128, 0.35);
      box-shadow: 0 8px 18px rgba(240, 128, 128, 0.12);
      background: transparent;
    }

    .hidden { display: none !important; }

    @keyframes shake {
      0% { transform: translateX(0); }
      25% { transform: translateX(-6px); }
      50% { transform: translateX(6px); }
      75% { transform: translateX(-4px); }
      100% { transform: translateX(0); }
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes wiggle {
      0% { transform: rotate(0deg); }
      25% { transform: rotate(-6deg); }
      50% { transform: rotate(6deg); }
      75% { transform: rotate(-4deg); }
      100% { transform: rotate(0deg); }
    }

    @keyframes blink {
      0%, 100% { transform: scaleY(1); }
      45%, 55% { transform: scaleY(0.1); }
    }

    @media (max-width: 480px) {
      .card { padding: 20px 16px; }
      .question { font-size: 1rem; }
    }
  </style>
</head>
<body>
  <main class="wrap">
    <section id="game">
      <div class="dogs" id="dogs">
        <img src="./dog1.png" alt="dog1" />
        <img src="./dog2.png" alt="dog2" />
        <img src="./dog3.png" alt="dog3" />
        <img src="./dog4.png" alt="dog4" />
        <img src="./dog5.png" alt="dog5" />
      </div>
      <div class="bubble" id="bubble"></div>

      <div class="card" id="card">
        <h1 class="title">è¥¿è¥¿é—¯å…³</h1>
        <div class="question" id="question"></div>
        <div class="input-row">
          <input id="answer" type="text" placeholder="" autocomplete="off" />
          <button id="submit">é—¯å…³</button>
        </div>
        <div class="progress" id="progress"></div>
      </div>
    </section>

    <div class="final" id="final">
      <div class="final-text">happy dog, happy life</div>
      <div class="final-letter" aria-hidden="true"></div>
    </div>
  </main>

  <audio id="success-audio" src=""></audio>

  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
  <script>
    const questions = [
      { q: "å’Œè¥¿è¥¿ç¬¬ä¸€æ¬¡è¯´è¯çš„æ—¶é—´æ˜¯", a: "250120", hint: "6ä½æ•°å­—" },
      { q: "è¥¿è¥¿æ˜¯ä»€ä¹ˆmbti", a: "enfj", hint: "4ä½å­—æ¯" },
      { q: "è¥¿è¥¿æœ€å–œæ¬¢åƒä»€ä¹ˆ", a: "é¸¡", hint: "ä¸€ä¸ªå­—" },
      { q: "è¥¿è¥¿å–œæ¬¢å¤å¤©è¿˜æ˜¯å†¬å¤©", a: "å†¬å¤©", hint: "ç•¥ç•¥ç•¥" },
      { q: "è¥¿è¥¿æœ€å–œæ¬¢ä»€ä¹ˆé¢œè‰²", a: "è“è‰²", hint: "å®¶é‡Œæœ‰" },
      { q: "è¥¿è¥¿çŽ°åœ¨æœ€æƒ³è¦ä»€ä¹ˆ", a: "æˆ’æŒ‡", hint: "ç•¥ç•¥" }
    ];

    const roasts = [
      "è¿™éƒ½ä¸çŸ¥é“ï¼Ÿ",
      "ä»Šæ™šç¡æ²™å‘ï¼",
      "è¥¿è¥¿è¦ç”Ÿæ°”äº†ðŸ˜ ",
      "ç”¨å¿ƒç‚¹å¥½å—"
    ];

    const questionEl = document.getElementById("question");
    const answerEl = document.getElementById("answer");
    const submitEl = document.getElementById("submit");
    const progressEl = document.getElementById("progress");
    const bubbleEl = document.getElementById("bubble");
    const dogsEl = document.getElementById("dogs");
    const cardEl = document.getElementById("card");
    const finalEl = document.getElementById("final");
    const audioEl = document.getElementById("success-audio");

    let index = 0;

    function renderQuestion() {
      const item = questions[index];
      questionEl.textContent = item.q;
      answerEl.value = "";
      answerEl.placeholder = item.hint;
      progressEl.textContent = `ç¬¬ ${index + 1} / ${questions.length} é¢˜`;
      bubbleEl.classList.remove("show");
      bubbleEl.textContent = "";
    }

    function normalize(str) {
      return str.trim().toLowerCase();
    }

    function showBubble() {
      const msg = roasts[Math.floor(Math.random() * roasts.length)];
      bubbleEl.textContent = msg;
      bubbleEl.classList.add("show");
    }

    function wrongAnswer() {
      answerEl.classList.add("error");
      dogsEl.classList.add("annoyed");
      showBubble();
      setTimeout(() => {
        answerEl.classList.remove("error");
        dogsEl.classList.remove("annoyed");
      }, 1500);
    }

    function rightAnswer() {
      if (audioEl && audioEl.src) {
        audioEl.currentTime = 0;
        audioEl.play().catch(() => {});
      }

      const colors = ["#F08080", "#87CEEB"];
      const end = Date.now() + 900;
      (function frame() {
        confetti({
          particleCount: 14,
          spread: 100,
          startVelocity: 50,
          origin: { x: 0.5, y: 0.5 },
          colors
        });
        confetti({
          particleCount: 14,
          spread: 100,
          startVelocity: 50,
          origin: { x: 0.5, y: 0.5 },
          colors
        });
        confetti({
          particleCount: 12,
          spread: 120,
          startVelocity: 45,
          origin: { x: 0.5, y: 0.5 },
          colors
        });
        if (Date.now() < end) requestAnimationFrame(frame);
      })();

      setTimeout(() => {
        index += 1;
        if (index >= questions.length) {
          endGame();
        } else {
          renderQuestion();
        }
      }, 1000);
    }

    function endGame() {
      document.getElementById("game").classList.add("hidden");
      finalEl.style.display = "block";
    }

    function checkAnswer() {
      const item = questions[index];
      if (!item) return;
      const user = normalize(answerEl.value);
      const correct = normalize(item.a);
      if (user === correct) {
        rightAnswer();
      } else {
        wrongAnswer();
      }
    }

    submitEl.addEventListener("click", checkAnswer);
    answerEl.addEventListener("keydown", (e) => {
      if (e.key === "Enter") checkAnswer();
    });

    dogsEl.querySelectorAll("img").forEach((img) => {
      img.addEventListener("click", () => {
        const r = Math.random();
        const cls = r < 0.5 ? "wiggle" : "blink";
        img.classList.remove("wiggle", "blink");
        // Force reflow to restart animation
        void img.offsetWidth;
        img.classList.add(cls);
        setTimeout(() => img.classList.remove(cls), 500);
      });
    });

    renderQuestion();
  </script>
</body>
</html>
